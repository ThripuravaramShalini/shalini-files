#include <stdio.h>
#include <string.h>

// Define maximum number of students
#define MAX_STUDENTS 50

// Structure to store student information
struct Student {
    char name[50];
    float grade;
};

void inputStudentData(struct Student students[], int *count);
void displayStudentData(struct Student students[], int count);
float calculateAverage(struct Student students[], int count);
void displayHighestLowestGrades(struct Student students[], int count);

int main() {
    struct Student students[MAX_STUDENTS];
    int count = 0;
    
    // Input student data
    inputStudentData(students, &count);
    
    // Display all student data
    displayStudentData(students, count);
    
    // Calculate and display the average grade
    float average = calculateAverage(students, count);
    printf("\nAverage Grade: %.2f\n", average);
    
    // Display highest and lowest grade
    displayHighestLowestGrades(students, count);
    
    return 0;
}

// Function to input student data
void inputStudentData(struct Student students[], int *count) {
    int numStudents;
    printf("Enter the number of students: ");
    scanf("%d", &numStudents);
    
    // Input data for each student
    for (int i = 0; i < numStudents; i++) {
        printf("\nEnter name of student %d: ", i + 1);
        getchar();  // To consume newline character left by previous input
        fgets(students[i].name, sizeof(students[i].name), stdin);
        students[i].name[strcspn(students[i].name, "\n")] = '\0'; // Remove newline character
        
        printf("Enter grade for %s: ", students[i].name);
        scanf("%f", &students[i].grade);
    }
    *count = numStudents;
}

// Function to display student data
void displayStudentData(struct Student students[], int count) {
    printf("\nStudent Grades:\n");
    printf("=================================\n");
    for (int i = 0; i < count; i++) {
        printf("Name: %-20s Grade: %.2f\n", students[i].name, students[i].grade);
    }
    printf("=================================\n");
}

// Function to calculate the average grade
float calculateAverage(struct Student students[], int count) {
    float total = 0;
    for (int i = 0; i < count; i++) {
        total += students[i].grade;
    }
    return total / count;
}

// Function to display the highest and lowest grades
void displayHighestLowestGrades(struct Student students[], int count) {
    if (count == 0) return;

    float highest = students[0].grade, lowest = students[0].grade;
    int highestIndex = 0, lowestIndex = 0;

    for (int i = 1; i < count; i++) {
        if (students[i].grade > highest) {
            highest = students[i].grade;
            highestIndex = i;
        }
        if (students[i].grade < lowest) {
            lowest = students[i].grade;
            lowestIndex = i;
        }
    }

    printf("\nHighest Grade: %.2f by %s\n", highest, students[highestIndex].name);
    printf("Lowest Grade: %.2f by %s\n", lowest, students[lowestIndex].name);
}
